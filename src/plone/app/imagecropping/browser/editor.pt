<html metal:use-macro="context/main_template/macros/master"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  i18n:domain="plone.app.imagecropping">
  <body>

    <metal:main fill-slot="main">
      <div metal:define-macro="content-core" tal:define="scales view/scales;
                                                         current_url view/current_url;
                                                         editor_size view/editor_size;
                                                         image_url view/image_url;">

        <form method="post" id="coords" class="coords" tal:attributes="action current_url"
                                                       tal:condition="scales">

          <!-- select scales-->
          <select name="image-select" id="image-select">
                <option tal:repeat="scale scales"
                  tal:attributes="value string:${scale/id};
                                  data-jcrop_config string:${scale/config};
                                  selected string:${scale/selected}"
                  tal:content="scale/id">
                </option>
          </select>

          <!--JCrop Editor-->
          <tal:imageform tal:define="image view/current_scale;">
            <img class="cropbox" tal:attributes="src image_url;" />

            <div>
              <label for="x1" i18n:translate="">X1</label>
              <input type="text" size="4" id="x1" name="x1" />
              <label for="y1" i18n:translate="">Y1</label>
              <input type="text" size="4" id="y1" name="y1" />
              <label for="x2" i18n:translate="">X2</label>
              <input type="text" size="4" id="x2" name="x2" />
              <label for="y2" i18n:translate="">Y2</label>
              <input type="text" size="4" id="y2" name="y2" />

              <input type="hidden" id="scalename" name="scalename" value=""
                tal:attributes="value image/id" />

            </div>
            <input type="submit"
              class="context"
              value="Save"
              i18n:attributes="value"
              name="form.button.Save"
              />
            <input type="submit"
              class="context"
              value="Delete"
              i18n:attributes="value"
              name="form.button.Delete"
              />
            <input type="submit"
              class="context"
              value="Cancel"
              i18n:attributes="value"
              name="form.button.Cancel"
              />
          </tal:imageform>

        </form>

      </div>
    </metal:main>

  </body>

</html>
